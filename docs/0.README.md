# マネーフィット - Diet to Earn App

## 1. プロジェクト概要

「マネーフィット」は、日々のダイエットの努力を「資産」として可視化する、新しい体験を提供する Web アプリケーションです。ユーザーは自身の体重と目標を設定し、目標達成度に応じて擬似的に銀行口座の残高が増えていきます。楽しみながら健康的な生活習慣を身につけ、資産形成への意識を高めることを目的としています。

### 1.1. アプリケーション名の候補

- マネーフィット (MoneyFit)
- シンデレラバンク (Cinderella Bank)
- ヘルスウェルス (HealthWealth)
- シェイプアップバンク (ShapeUp Bank)

## 2. 目的とコンセプト

- **目的:** 継続が難しいダイエットに「資産が増える」というゲーミフィケーション要素を取り入れ、ユーザーのモチベーションを維持・向上させる。
- **コンセプト:** 「あなたの努力が、未来の健康と資産を築く」

## 3. ターゲットユーザー

- ダイエットや健康管理に興味はあるが、なかなか継続できない 20 代〜40 代の男女
- ゲーミフィケーションや新しいテクノロジーに関心が高い層
- 資産形成の第一歩として、楽しみながらお金の管理を体験したいと考えている人

## 4. 主な機能一覧

| 機能名                       | 概要                                                                                                                                               |
| :--------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------- |
| **ユーザー登録・ログイン**   | メールアドレスとパスワードでユーザーアカウントを作成・管理する。                                                                                   |
| **プロフィール設定**         | ユーザーの初期体重と目標体重を設定する。                                                                                                           |
| **体重記録**                 | 日々の体重を記録する。記録はカレンダーやグラフで可視化される。                                                                                     |
| **目標達成率の可視化**       | `(初期体重 - 現在体重) / (初期体重 - 目標体重) * 100` で達成率を計算し、プログレスバーで表示する。                                                 |
| **擬似入金体験**             | 目標達成率が一定の閾値（例: 10%）を超えるごとに、GMO あおぞら NET 銀行の sunabar（テスト環境）API を利用して擬似的な入金処理を行い、残高を増やす。 |
| **残高・進捗ダッシュボード** | 現在の残高、目標達成率、体重の推移グラフ、アバターの変化などを一画面で確認できる。                                                                 |
| **アバターの変化**           | 体重の減少に応じて、アバターがスリムで健康的な姿に変化する。                                                                                       |

## 5. 画面構成（簡易）

1.  **LP / ログインページ**
2.  **新規登録ページ**
3.  **プロフィール設定ページ（初回ログイン時）**
4.  **メインダッシュボード**
    - ヘッダー（ロゴ、ログアウトボタン）
    - 残高表示エリア
    - 目標達成率プログレスバー
    - アバター表示エリア
    - 今日の体重入力フォーム
    - 体重推移グラフ

## 6. 使用技術スタック

| カテゴリ            | 技術                                | 理由                                                                      |
| :------------------ | :---------------------------------- | :------------------------------------------------------------------------ |
| **フロントエンド**  | Next.js 14+ (App Router)            | React の最新機能に対応し、パフォーマンスと開発者体験に優れるため。        |
| **UI/スタイリング** | TailwindCSS                         | 高速な UI 開発が可能で、カスタマイズ性に優れるため。                      |
| **言語**            | TypeScript                          | 静的型付けにより、開発時のエラーを減らし、コードの堅牢性を高めるため。    |
| **バックエンド**    | Next.js (API Routes)                | フロントエンドと同じフレームワークで完結でき、開発効率が良いため。        |
| **データベース**    | PostgreSQL                          | 高機能で信頼性が高く、多くの環境で利用実績があるため。                    |
| **DB コンテナ**     | Docker / Docker Compose             | 開発環境の再現性を高め、チーム開発を容易にするため。                      |
| **ORM**             | Prisma                              | TypeScript との親和性が非常に高く、直感的にデータベースを操作できるため。 |
| **外部 API**        | GMO あおぞら NET 銀行 API (sunabar) | 本プロジェクトのコア要件である銀行連携を実現するため。                    |

## 7. API エンドポイント設計（案）

| メソッド | エンドポイント       | 説明                             |
| :------- | :------------------- | :------------------------------- |
| POST     | `/api/auth/register` | 新規ユーザー登録                 |
| POST     | `/api/auth/login`    | ログイン                         |
| POST     | `/api/auth/logout`   | ログアウト                       |
| GET      | `/api/user/me`       | ログイン中ユーザーの情報取得     |
| PUT      | `/api/user/profile`  | プロフィール（目標体重など）更新 |
| POST     | `/api/weights`       | 今日の体重を記録                 |
| GET      | `/api/weights`       | 過去の体重記録を取得             |
| GET      | `/api/gmo/balance`   | 銀行口座の残高を取得             |

## 8. データベース設計（案）

**User テーブル**
| カラム名 | 型 | 説明 |
| :--- | :--- | :--- |
| `id` | `String` | ユーザー ID (主キー, CUID) |
| `email` | `String` | メールアドレス (ユニーク) |
| `password` | `String` | ハッシュ化されたパスワード |
| `initialWeight`| `Float?` | 初期体重 |
| `targetWeight` | `Float?` | 目標体重 |
| `createdAt` | `DateTime` | 作成日時 |
| `updatedAt` | `DateTime` | 更新日時 |

**WeightLog テーブル**
| カラム名 | 型 | 説明 |
| :--- | :--- | :--- |
| `id` | `String` | ログ ID (主キー, CUID) |
| `weight` | `Float` | 記録された体重 |
| `date` | `DateTime`| 記録日 |
| `userId` | `String` | ユーザー ID (外部キー) |
| `createdAt` | `DateTime` | 作成日時 |
